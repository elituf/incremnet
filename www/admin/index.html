<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>incremnet admin</title>
</head>

<body>
    <div class="inputbox-container" style="margin-top: 16px;">
        <label>admin token</label>
        <div class="controls">
            <input id="token" type="password" />
        </div>
    </div>
    <br>
    <div class="inputbox-container">
        <label>set user</label>
        <div class="controls">
            <input id="count-user" style="width: 108px;" />
            <input id="count" style="width: 64px;" />
            <button class="btn" onclick="set_user()">set</button>
        </div>
    </div>
    <div class="inputbox-container">
        <label>delete user</label>
        <div class="controls">
            <input id="delete-user" style="width: 108px;" />
            <button class="btn" onclick="delete_user()">delete</button>
        </div>
    </div>
</body>

<script>
  function extract_input(id) {
    return document.getElementById(id).value;
  }

  async function set_user() {
    token = extract_input('token');
    user = extract_input('count-user');
    count = extract_input('count');

    const url = `https://increm.net/admin/${user}/${count}`
    try {
      const response = await fetch(url, {
        method: "PUT",
        headers: {
          "Authorization": `Bearer ${token}`
        }
      });
      const result = await response.text();
      console.log(result)
      alert(result)
    } catch (error) {
      console.error(error)
    }
  }

  async function delete_user() {
    token = extract_input('token');
    user = extract_input('delete-user');

    const url = `https://increm.net/admin/${user}`
    try {
      const response = await fetch(url, {
        method: "DELETE",
        headers: {
          "Authorization": `Bearer ${token}`
        }
      });
      const result = await response.text();
      console.log(result)
      alert(result)
    } catch (error) {
      console.error(error)
    }
  }
</script>

<style>
    @import url(https://fonts.bunny.net/css?family=ibm-plex-mono:400);

    * {
        font-family: 'IBM Plex Mono', monospace;
    }

    body, input {
        color: white;
        background-color: black;
    }

    input {
        border: 2px solid white;
    }

    p, label {
        font-size: 14px;
    }

    ::selection {
        color: black;
        background-color: white;
    }

    .inputbox-container {
        display: grid;
        grid-template-columns: 128px 1fr;
        column-gap: 12px;
        align-items: center;
        margin-bottom: 16px;
    }

    .inputbox-container > label {
        text-align: right;
        justify-self: end;
    }

    .controls {
        display: flex;
        gap: 8px;
        align-items: center;
        justify-content: flex-start;
    }

    .btn {
        color: white;
        background-color: black;
        border: 2px solid white;
        cursor: pointer;
    }
</style>

</html>
